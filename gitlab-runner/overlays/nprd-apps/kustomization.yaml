apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: managed-cicd

resources:
  - gitlab-runner-helmchart.yaml
  - containerd-harbor-cert-daemonset.yaml
  # Note: Harbor now uses the default ingress certificate
  # Run: ./scripts/sync-harbor-ca-cert.sh to extract the certificate from Harbor endpoint
  # The script creates harbor-ca-cert secret in managed-cicd namespace
  # The DaemonSet automatically configures containerd on all nodes to trust Harbor certificates

# Cluster-specific overrides for nprd-apps
# Add any nprd-apps specific configurations here
# Examples:
# - resource limits/requests
# - storage class
# - environment-specific values
# - GitLab URL (if different per cluster)

patches:
  # Add patches here for nprd-apps specific configurations
  # - path: resource-limits.yaml
  #   target:
  #     kind: HelmChart
  #     name: gitlab-runner
