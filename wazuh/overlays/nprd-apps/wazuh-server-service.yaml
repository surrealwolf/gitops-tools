# Wazuh Server Service
#
# This service exposes Wazuh Server for:
# - Agent connections (port 1514: TCP, port 1515: UDP)
# - API access (port 55000)
#
# For external agent access, you may need a LoadBalancer or NodePort service.
# This can be configured in the overlay.
#
apiVersion: v1
kind: Service
metadata:
  name: wazuh-server
  namespace: managed-tools
  labels:
    app: wazuh
    component: server
    managed-by: gitops
spec:
  type: NodePort
  ports:
  - name: agent-tcp
    port: 1514
    targetPort: 1514
    protocol: TCP
  - name: agent-udp
    port: 1515
    targetPort: 1515
    protocol: UDP
  - name: syslog-udp
    port: 514
    targetPort: 514
    protocol: UDP
    nodePort: 30514
  - name: api
    port: 55000
    targetPort: 55000
    protocol: TCP
  selector:
    app: wazuh
    component: server
