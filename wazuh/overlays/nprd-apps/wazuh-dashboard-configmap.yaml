# Wazuh Dashboard ConfigMap
#
# Configuration for Wazuh Dashboard to connect to Wazuh Indexer
#
apiVersion: v1
kind: ConfigMap
metadata:
  name: wazuh-dashboard-config
  namespace: managed-tools
  labels:
    app: wazuh
    component: dashboard
    managed-by: gitops
data:
  opensearch_dashboards.yml: |
    # Server configuration
    server.host: 0.0.0.0
    server.port: 5601
    server.ssl.enabled: false
    
    # OpenSearch/Wazuh Indexer configuration
    opensearch.hosts: https://wazuh-indexer:9200
    opensearch.ssl.verificationMode: certificate
    opensearch.ssl.certificateAuthorities: ["/etc/wazuh-dashboard/certs/root-ca.pem"]
    opensearch.requestHeadersAllowlist: ["securitytenant","Authorization"]
    
    # Security settings
    opensearch_security.multitenancy.enabled: false
    opensearch_security.readonly_mode.roles: ["kibana_read_only"]
    
    # UI settings
    uiSettings.overrides.defaultRoute: /app/wz-home
